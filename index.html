<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üé≤ Modo Tablero</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>üé≤ Modo Tablero</h1>

    <div class="game-section">
      <label for="juego">¬øQu√© juego jugamos?</label>
      <input type="text" id="juego" placeholder="Ej: Uno, Monopoly..." />
    </div>

    <div class="rating-section">
      <label>Calificaci√≥n del juego:</label>
      <div class="stars" id="stars">
        <span data-value="1">‚≠ê</span>
        <span data-value="2">‚≠ê</span>
        <span data-value="3">‚≠ê</span>
        <span data-value="4">‚≠ê</span>
        <span data-value="5">‚≠ê</span>
      </div>
    </div>

    <div class="winner-section">
      <label>¬øQui√©n gan√≥?</label>
      <select id="winner">
        <option value="">Seleccionar...</option>
        <option value="Anna">Anna üß°</option>
        <option value="Tiago">Tiago üíô</option>
      </select>
      <button id="save">Guardar partida</button>
    </div>

    <div class="progress-section">
      <div class="score-header">
        <span>Anna</span>
        <span>Tiago</span>
      </div>
      <div class="progress-bar">
        <div id="anna-progress" class="progress anna"></div>
        <div id="tiago-progress" class="progress tiago"></div>
      </div>
      <p id="score"></p>
    </div>

    <div class="history-section">
      <h3>üìú Historial de partidas</h3>
      <ul id="history"></ul>
      <button id="reset">Reiniciar marcador</button>
    </div>
  </div>

  <!-- Firebase -->
<style>
  body {
  font-family: 'Poppins', sans-serif;
  background: #f6deff;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container {
  background: white;
  padding: 30px;
  border-radius: 25px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  width: 90%;
  max-width: 420px;
  text-align: center;
  border: 3px solid #995cd6;
}

h1 {
  color: #995cd6;
  margin-bottom: 20px;
}

label {
  display: block;
  font-weight: 600;
  margin-bottom: 5px;
}

input, select {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: 1.5px solid #995cd6;
  margin-bottom: 15px;
  outline: none;
}

button {
  background-color: #995cd6;
  border: none;
  padding: 10px 20px;
  border-radius: 12px;
  color: white;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}

button:hover {
  background-color: #7d41b3;
}

.stars span {
  font-size: 30px;
  cursor: pointer;
  color: #bbb;
  transition: all 0.2s ease;
}

.stars span.active {
  color: #ffcc00;
  text-shadow: 0 0 10px #ffd966;
}

.progress-section {
  margin-top: 25px;
}

.score-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 5px;
  font-weight: bold;
  color: #5a3a99;
}

.progress-bar {
  display: flex;
  width: 100%;
  height: 25px;
  background-color: #eee;
  border-radius: 15px;
  overflow: hidden;
  position: relative;
}

.progress {
  height: 100%;
  transition: width 0.5s ease;
}

.anna {
  background-color: #f6deff;
}

.tiago {
  background-color: #bca0ff;
}

#score {
  margin-top: 10px;
  font-weight: 600;
  color: #5a3a99;
}

.history-section {
  margin-top: 25px;
  text-align: left;
}

.history-section h3 {
  color: #995cd6;
  text-align: center;
}

#history {
  list-style: none;
  padding: 0;
  margin-top: 10px;
  max-height: 180px;
  overflow-y: auto;
}

#history li {
  background: #f6deff;
  border-left: 4px solid #995cd6;
  margin-bottom: 8px;
  padding: 8px 10px;
  border-radius: 8px;
  font-size: 14px;
}

</style>

  <script type="module" src="script.js">
        // --- CONFIGURAR FIREBASE ---
// (Cambi√° los valores por los tuyos desde tu panel de Firebase)
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getDatabase, ref, push, get, set } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "TU_API_KEY",
  authDomain: "TU_DOMINIO.firebaseapp.com",
  databaseURL: "https://TU_DB.firebaseio.com",
  projectId: "TU_ID",
  storageBucket: "TU_BUCKET.appspot.com",
  messagingSenderId: "TU_SENDER_ID",
  appId: "TU_APP_ID"
};

// Inicializar Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// --- ELEMENTOS DOM ---
const stars = document.querySelectorAll('#stars span');
const juegoInput = document.getElementById('juego');
const winnerSelect = document.getElementById('winner');
const saveBtn = document.getElementById('save');
const resetBtn = document.getElementById('reset');
const annaProgress = document.getElementById('anna-progress');
const tiagoProgress = document.getElementById('tiago-progress');
const scoreText = document.getElementById('score');
const historyList = document.getElementById('history');

let rating = 0;
let resultados = { Anna: 0, Tiago: 0 };
let historial = [];

// --- ESTRELLAS INTERACTIVAS ---
stars.forEach(star => {
  star.addEventListener('click', () => {
    rating = parseInt(star.dataset.value);
    stars.forEach(s => s.classList.remove('active'));
    for (let i = 0; i < rating; i++) stars[i].classList.add('active');
  });
});

// --- CARGAR DATOS DESDE FIREBASE ---
async function cargarDatos() {
  const snapshot = await get(ref(db, "modoTablero/"));
  if (snapshot.exists()) {
    const data = snapshot.val();
    resultados = data.resultados || { Anna: 0, Tiago: 0 };
    historial = data.historial || [];
  }
  updateProgress();
  renderHistory();
}

// --- ACTUALIZAR PROGRESO ---
function updateProgress() {
  const total = resultados.Anna + resultados.Tiago;
  if (total === 0) {
    annaProgress.style.width = '50%';
    tiagoProgress.style.width = '50%';
    scoreText.textContent = 'A√∫n no hay partidas.';
    return;
  }
  const annaPct = ((resultados.Anna / total) * 100).toFixed(1);
  const tiagoPct = ((resultados.Tiago / total) * 100).toFixed(1);

  annaProgress.style.width = `${annaPct}%`;
  tiagoProgress.style.width = `${tiagoPct}%`;
  scoreText.textContent = `Anna: ${annaPct}% ‚Äî Tiago: ${tiagoPct}%`;
}

// --- HISTORIAL ---
function renderHistory() {
  historyList.innerHTML = '';
  historial.slice().reverse().forEach(item => {
    const li = document.createElement('li');
    li.textContent = `üéÆ ${item.juego} | ‚≠ê${item.rating} | üèÜ ${item.winner} | ${item.fecha}`;
    historyList.appendChild(li);
  });
}

// --- GUARDAR PARTIDA ---
saveBtn.addEventListener('click', async () => {
  const juego = juegoInput.value.trim();
  const winner = winnerSelect.value;
  if (!juego) return alert('Escrib√≠ el nombre del juego üé≤');
  if (!rating) return alert('Seleccion√° una calificaci√≥n ‚≠ê');
  if (!winner) return alert('Seleccion√° qui√©n gan√≥ üèÜ');

  resultados[winner]++;
  const fecha = new Date().toLocaleString('es-AR');
  historial.push({ juego, rating, winner, fecha });

  await set(ref(db, "modoTablero/"), { resultados, historial });

  updateProgress();
  renderHistory();

  juegoInput.value = '';
  winnerSelect.value = '';
  stars.forEach(s => s.classList.remove('active'));
  rating = 0;
});

// --- REINICIAR ---
resetBtn.addEventListener('click', async () => {
  if (confirm('¬øReiniciar marcador e historial?')) {
    resultados = { Anna: 0, Tiago: 0 };
    historial = [];
    await set(ref(db, "modoTablero/"), { resultados, historial });
    updateProgress();
    renderHistory();
  }
});

cargarDatos();

  </script>

</body>
</html>
